<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8" />
  <title>Hubungi Kami - Siber Shop (Encrypted)</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <style>
    html, body {
      height: 100%; margin: 0; padding: 0;
      font-family: Arial, sans-serif;
      background-color: #f8f9fa;
      display: flex; align-items: center; justify-content: center;
    }
    #loading {
      font-size: 1.2rem;
      color: #212529;
    }
    #decrypted-content {
      display: none;
    }
  </style>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/crypto-js/4.1.1/crypto-js.min.js"></script>
</head>
<body>
  <div id="loading">Memuat halaman...</div>
  <div id="decrypted-content"></div>

  <script>
    // Encrypted data (AES encrypted & base64) hasil enkripsi halaman kontak kamu
    const encryptedData = "U2FsdGVkX19pj12Z9W5iW9tGf87S8+HlEwEyQkYaj5fNMBRw0dVJmOdAvqwexX8i+0NcM+6kkBIVIa6fu+Iz2G90HAlTDqXrH3Wp/ogEchhnREvEjlnfE2LfTuY66NQHjxKFC2piYvtQxQ0b7B0IwkgpEElVhhJrSe6rRY5Z9pOQax0h1mM3i9/kC9De67uOd6Ak9jACxaVJuRWMvAef5q1xo1UC6ptWu9P2hzoRkdySlPY5l5GAtivxdyCZpJXPbqDlOBkXWLwDjQd6eAuwGakfF8n3iHuWZ48YNjMdkvZYTF6jDbdxP2JXqqzQU3i4F0qtFw4qMGXHU6wTspK94ed1ZZZHLQCUbGQMgDjmuOIlDg2ukH7ZbzXQQajkqzJm96cckDCEpRbiZGY2p6J8MTNJoZmN16Ok0PxaAeEkk6BTB5esP38WqkPjo9wd7DeRFqzH/8Ti6ylmPRLULq4j3wYY7p8XwgUmh1aDvckNLWNgA14QXXDEtF0ABvfuY0EZh53k9dqDUqzUJTKp7nwwSqCZa3O7nl1AGbnvAqQlgl0O3KSk74pILqpt0uANrN9YGF1XhSvz4Euyw9yTQlLcMmiqY9keJY8A3sl//DhA2F5cBjcReK9gVQ8EWPHoJ7OkMeEGy3EhK9F7u6H6qBoA50v+ZwpzOYj53x8FDFasRkI8kt0Cg6J3dS4tgUGdrgQm7QFz0HChD4tC4OnuKSGYmOUlMUoPq21rKjAakxCcfPB7qJKuy9/Ll7jhmSHiKRy95DFVhWJdhDrCwCEQqReuysLBTSrq8LtSCn8G+XvMSX8qN+c1Vq8PZjzV81l5db8q3AeT9Z4nQzqskG8pQidI4oTXyOLQdjXlX3Aq2yVvPcnN0l5cGoZ2YKFFcQ9sR/42XsG9k=";

    // Fungsi decrypt tanpa passphrase (karena sudah terenkripsi tanpa kunci)
    function decryptAES(encrypted) {
      // Karena data sudah menggunakan salt & key default CryptoJS (karena kunci kosong), kita bisa pakai ini
      // Namun agar pasti, saya coba decrypt dengan empty string sebagai key:
      try {
        const key = CryptoJS.enc.Utf8.parse(''); // key kosong
        const decrypted = CryptoJS.AES.decrypt(encrypted, key, { format: CryptoJS.format.OpenSSL });
        return decrypted.toString(CryptoJS.enc.Utf8);
      } catch(e) {
        return null;
      }
    }

    // Fungsi decrypt standar CryptoJS dengan key kosong harus pakai .decrypt dengan passphrase
    // Jadi pakai decrypt dengan passphrase kosong
    function decryptWithPassphrase(encrypted, passphrase = '') {
      try {
        const decrypted = CryptoJS.AES.decrypt(encrypted, passphrase);
        return decrypted.toString(CryptoJS.enc.Utf8);
      } catch(e) {
        return null;
      }
    }

    // Main
    window.onload = function() {
      // Decrypt pakai passphrase kosong
      const html = decryptWithPassphrase(encryptedData, '');

      if(html && html.length > 0) {
        document.getElementById('loading').style.display = 'none';
        const container = document.getElementById('decrypted-content');
        container.style.display = 'block';
        container.innerHTML = html;

        // Karena konten punya link ke Bootstrap & FontAwesome dan script EmailJS, kita inject juga secara manual:
        addDependencies();
      } else {
        document.getElementById('loading').textContent = 'Gagal memuat konten.';
      }
    };

    function addDependencies() {
      // Bootstrap CSS
      const linkBootstrap = document.createElement('link');
      linkBootstrap.rel = 'stylesheet';
      linkBootstrap.href = 'https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css';
      document.head.appendChild(linkBootstrap);

      // FontAwesome CSS
      const linkFA = document.createElement('link');
      linkFA.rel = 'stylesheet';
      linkFA.href = 'https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css';
      document.head.appendChild(linkFA);

      // jQuery
      const scriptJQ = document.createElement('script');
      scriptJQ.src = 'https://code.jquery.com/jquery-3.6.0.min.js';
      document.body.appendChild(scriptJQ);

      // Bootstrap Bundle JS
      const scriptBS = document.createElement('script');
      scriptBS.src = 'https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js';
      document.body.appendChild(scriptBS);

      // EmailJS SDK
      const scriptEmailJS = document.createElement('script');
      scriptEmailJS.src = 'https://cdn.jsdelivr.net/npm/@emailjs/browser@3/dist/email.min.js';
      document.body.appendChild(scriptEmailJS);

      // Init EmailJS dan form submit handler setelah EmailJS siap
      scriptEmailJS.onload = () => {
        emailjs.init('p3Z-M_PBNyMnwSvgW'); // public key

        // Setelah jQuery dan EmailJS siap, pasang event listener
        scriptJQ.onload = () => {
          $('#contactForm').on('submit', function(e) {
            e.preventDefault();
            emailjs.sendForm('service_oa6m0ze', 'template_j6824jx', this)
              .then(() => {
                alert('Pesan berhasil dikirim!');
                this.reset();
              }, (error) => {
                alert('Gagal mengirim pesan, coba lagi nanti.');
                console.error('FAILED...', error);
              });
          });
        };
      };
    }
  </script>
</body>
</html>
